# 03. Variable and Constant

## 3.1 식별자

- 식별자는 변수나 함수의 이름이다.
- 식별자는 값이 아니라 값이 저장된 메모리 주소를 기억한다.



### 식별자 네이밍 컨밴션

- Javascript 식별자는 문자, 밑줄, 달러 기호로 시작할 수 있다.
- Javascript 식별자는 대소문자를 구분한다.
- Javascript 식별자는 문자, 숫자, 밑줄을 포함할 수 있다.
- Javascript 식별자에는 유니코드 문자, 유니코드 이스케이프 시퀀스를 사용할 수 있다.
- Javascript 식별자에는 공백을 포함할 수 없다.
- Javscript 식별자에는 예약어를 사용할 수 없다. (strict mode)



## 3.2 변수

**변수(variable)**은 하나의 값을 저장하기 위해 확보한 메모리 공간 자체 또는 그 메모리 공간을 식별하기 위해 붙인 이름을 말한다.

선언되지 않은 식별자에 접근한다면 `ReferenceError` 예외가 발생하므로, 변수를 사용하려면 반드시 변수를 선언해야한다.

```js
console.log(a);
// Uncaught ReferenceError: a is not defined
```



### 변수 선언하기

>자바스크립트 엔진은 변수 선언을 2단계로 수행한다.
>
>1. **선언 단계**: 변수 이름을 등록하여 자바스크립트 엔진에게 변수의 존재를 알린다.
>2. **초기화 단계**: 값을 저장하기 위한 메모리 공간을 확보하고 암묵적으로 `undefined`를 할당하여 초기화한다.



#### 선언 단계

변수를 선언하는 방법은 다음 세 가지이다.

1. `var` 키워드로 선언하기

```javascript
var x;
```

함수 레벨 스코프(function-level scope)를 지원: **지역 및 전역 변수**를 선언하는데 사용한다.



2. `let` 키워드로 선언하기

```js
let y;
```

블록 레벨 스코프(block-level scope)를 지원: **블록 범위 지역 변수**를 선언하는데 사용한다.



3. 키워드 없이 선언하기: 의도되지 않는 동작을 만들어내고는 하므로, 사용하면 안된다.


```js
z;
```

선언되지 않는 전역변수를 만든다.



#### 초기화 단계

```js
let a;
console.log(a);	// undefined
```

- 변수는 선언과 동시에 초기화하지 않는다면 `undefined` 값을 갖는다.



#### 변수 여러 개를 선언하기

```javascript
let name, age;
```



### 변수 할당하기

변수에 값을 할당하는 방법은 두 가지가 있다.

1. 선언한 변수에 값을 할당하려면 할당 연산자 `=`를 사용한다.

```js
let a;
a = 1;
```

2. 선언과 동시에 할당할 수 있다. 이 단축 표현을 사용해도 자바스크립트 엔진은 `1번`처럼 두 개의 문으로 나누어 실행한다.

```js
let a = 1;
```

즉, 자바스크립트 엔진은 두 소스 코드를 동일한 동작(`1번`)으로 수행한다.



#### 변수 여러 개 선언하고 할당하기

```javascript
let name = 'umi', age = 1;
```



### 변수의 범위

- 변수의 범위는 함수를 기준으로 나뉜다.
  - 전역 변수: 함수의 바깥에 선언된 변수.
  - 지역 변수: 함수의 내부에 선언된 변수. 함수 내에서만 사용할 수 있다.
- ECMAScript 6 이전에는 블록 범위가 존재하지 않았다. 즉, 블록 내에서 `var`로 선언된 변수는 해당 <u>블록 내에 존재하는 함수 혹은 전역 범위에 지역적이다</u>. 이 경우 `x`의 범위는  `if`문 블록이 아니라 `x`가 선언된 함수 혹은 전역 문맥이다.

```javascript
if (true) {
    var x = 5;
}
console.log(x);	// 5
```

- ECMAScript 6에는 `let`을 도입하여 블록 범위 변수를 선언할 수 있다.

```javascript
if (true) {
    let y = 5;
}
console.log(y);	// ReferenceError 발생
```



### 변수 선언의 실행 시점

```js
console.log(a);		// undefined

var a = 1;

console.log(a);		// 1
```

선언되지 않은 변수를 참조하는 것은 `ReferenceError`를 발생시킨다. 그러나 `1번 라인`에서 그 전에 선언되지 않은 변수 `a`를 참조함에도 `ReferenceError`를 일으키지 않는다. 이는 자바스크립트에서 **변수 선언은 스크립트가 한 줄씩 실행되는 런타임(runtime) 이전에 실행되기 때문**이다. 즉 `1번 라인`이 실행되는 런타임 이전에 `var a;`라는 변수 선언이 실행되었기 때문이다. 이때 변수 선언이 *상단으로 끌어올려졌다*고 하며, **변수 호이스팅(variable hoisting)**이라고 한다.



### 변수 호이스팅

##### 키워드 `var`로 선언한 경우

[변수 할당하기](#변수-할당하기)에서 볼 수 있듯이, 위 코드에서 `3번 라인`의 할당문 `var a = 1;`은 아래처럼 두 개의 문으로 나눌 수 있다.

```js
console.log(a);		// undefined

var a;
a = 1;

console.log(a);		// 1
```

이 코드에서 `3번 라인`의 변수 선언문인 `var a;`만 *상단으로 끌어올려져*, 선언된 변수 `a`는 변수 선언 두 단계 중 두번째 단계인 초기화 단계에 따라  `undefined`로 초기화된다. 즉, 암묵적으로 아래와 같이 볼 수 있다.

```js
var a;		// 선언 단계 이후 초기화 단계에서 undefined로 초기화된다.
console.log(a);		// undefined

a = 1;		// 1을 할당

console.log(a);		// 1
```



##### 키워드 `let`, `const`로 선언한 경우

```js
console.log(a);		// ReferenceError

let a;
a = 1;

console.log(a);
```

`let`과 `const`로 선언된 변수 선언문 역시 *상단으로 끌어올려지나*, `undefined`로 초기화되지 않는다. 따라서 `ReferenceError`를 발생시킨다.

[Hoisting](https://github.com/leegwae/study-javascript/blob/main/Hoisting.md)을 참고한다.



### 전역 변수

- 전역 변수는 전역 객체(global object)의 프로퍼티이다.
- 웹 페이지에서 전역 객체는 `window`이므로, 전역 변수는 `windows.variable` 구문을 통해 설정하고 접근할 수 있다.



## 3.3 상수

**상수(constant)**는 최초로 값이 할당된 이후 그 값이 변경할 수 없다.

- (1) 코드가 실행되기 전 그 값이 정해진 상수
- (2) 런타임 과정에서 계산되나 할당 이후 값이 변하지 않는 상수



### 상수의 선언과 할당

- `const` 키워드로 읽기 전용 상수를 선언할 수 있다.

```javascript
const PI = 3.141592
```

- 같은 범위에 있는 함수나 변수와 동일한 이름으로 선언할 수 없다.
- 값으로 초기화 이후 런타임에 대입을 통해 재할당을 하거나 재선언할 수 없다. `Uncaught TypeError`를 발생시킨다.

```js
const a = 1;
a = 2;
// Uncaught TypeError: Assignment to constant variable.
```

- 그러나 <u>상수에 할당된 객체의 프로퍼티, 배열의 내용</u>은 보호되지 않는다: **상수 객체의 값은 변하지 않지만 그 내용은 수정할 수 있다.**

```javascript
/* 객체의 프로퍼티 */
const MY_OBJECT = { 'name': 'lana' };
MY_OBJECT.name = 'umi';

/* 배열의 내용 */
const MY_ARRAY = [ 1, 2, 3 ];
MY_ARRAY.push(4);
```



## 네이밍 컨밴션

- 변수나 함수는 대개 카멜 케이스를 사용한다. 예) `getClassName`
- 생성자 함수, 클래스에는 파스칼 케이스를 사용한다. 예) `MyClass`
- 상수는 대개 대문자와 밑줄로 구성한다. 예) `MAX_SIZE`
  - 런타임에 계산되는 경우는 변수와 동일하게 짓는다.



## let, var, const의 비교

- `var`: 변수를 선언한다.
- `let`: 블록 범위 지역 변수를 선언한다.
- `const`: 블록 범위 읽기 전용 상수를 선언한다.



| 키워드  | 재선언 | 재할당 |
| ------- | ------ | ------ |
| `var`   | o      | o      |
| `let`   | x      | o      |
| `const` | x      | x      |

